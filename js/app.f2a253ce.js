(function(t){function e(e){for(var s,n,o=e[0],l=e[1],c=e[2],d=0,f=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&f.push(a[n][0]),a[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],s=!0,o=1;o<i.length;o++){var l=i[o];0!==a[l]&&(s=!1)}s&&(r.splice(e--,1),t=n(n.s=i[0]))}return t}var s={},a={app:0},r=[];function n(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=s,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/ba20-kenspace-frontend/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"53cc":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);var s=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Home")],1)},r=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"header-container"},[i("div",{staticClass:"container"},[t._m(0),t.apiKey?i("div",[i("p",[i("b",[t._v("Hello!")]),t._v(" "),i("a",{attrs:{href:"#"},on:{click:t.logout}},[t._v("logout")])]),i("a",{attrs:{href:"#"},on:{click:t.clearFiltered}},[t._v("clear picked")]),t._v(" | "),i("a",{attrs:{href:"#"},on:{click:t.clearDeleted}},[t._v("clear deleted")]),t._v(" | "),i("a",{attrs:{href:"#"},on:{click:t.resetApp}},[t._v("reset & generate new model")]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-6"},[i("div",{staticClass:"display-filter"},[i("b",[t._v("picked")]),t._v(" "),0===t.filterByList.length?i("span",[t._v("none")]):t._e(),i("transition-group",{attrs:{name:"list"}},t._l(t.filterByList,(function(e,s){return i("span",{key:s+0,staticClass:"badge badge-dark mr-1 cursor-pointer",staticStyle:{"padding-right":"20px"},on:{click:function(i){return t.removeFilter(e)}}},[t._v(t._s(e)+" "),i("i",{staticClass:"ri-close-circle-line",staticStyle:{position:"absolute","padding-left":"5px"}})])})),0)],1),i("div",[i("b",[t._v("deleted")]),t._v(" "),0===t.deletedList.length?i("span",[t._v("none")]):t._e(),i("transition-group",{attrs:{name:"list"}},t._l(t.deletedList,(function(e,s){return i("span",{key:s+0,staticClass:"badge badge-dark mr-1 cursor-pointer",staticStyle:{"padding-right":"20px"},on:{click:function(i){return t.removeDeleted(e)}}},[t._v(t._s(e)+" "),i("i",{staticClass:"ri-close-circle-line",staticStyle:{position:"absolute","padding-left":"5px"}})])})),0)],1)]),t._m(1)])]):t._e()])]),t.apiKey?t._e():i("div",{staticClass:"container login-page"},[i("div",{staticClass:"jumbotron home-box"},[i("h1",{staticClass:"display-4"},[t._v("Sorry!")]),i("p",{staticClass:"lead"},[t._v(" This page is currently only accessible for registered beta users. ")]),i("hr",{staticClass:"my-4"}),i("a",{attrs:{href:"#"},on:{click:t.login}},[t._v("Click here if you have received a beta key")])])]),t.apiKey?i("div",{staticClass:"home-box"},[i("div",{staticClass:"hamburger cursor-pointer",class:{active:t.showMobileMenu},attrs:{id:"hamburger-circle"},on:{click:function(e){t.showMobileMenu=!t.showMobileMenu}}},[i("span",{staticClass:"line"}),i("span",{staticClass:"line"}),i("span",{staticClass:"line"})]),i("div",{staticClass:"wrapper"},[i("nav",{class:{active:t.showMobileMenu},attrs:{id:"sidebar"}},[i("h3",[t._v(" Facet "),i("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:t.changeSort}},[t._v(" Sort "),i("i",{staticClass:"fas",class:[t.sortABC?"fa-sort-numeric-down":"fa-sort-alpha-down"]})])]),i("div",{staticClass:"sidebar-card"},[0===t.facetData.length?i("div",[i("Loading")],1):t._e(),t._l(t.facetData,(function(e,s){return i("div",{key:s,staticClass:"facet-badge"},[i("span",{staticClass:"badge cursor-pointer",class:[t.filterByList.includes(s)?"badge-info":"badge-dark"],on:{click:function(e){return t.toggleFilter(s)}}},[t._v(t._s(s)+" "),i("span",{staticClass:"badge",class:[t.tagsSameAsResult?"badge-danger":"badge-light"]},[t._v(t._s(e))])]),i("div",{staticClass:"action-box"},[t.filterByList.includes(s)?t._e():i("div",{on:{click:function(e){return t.addFilter(s)}}},[i("i",{staticClass:"ri-heart-line"}),t._v(" Pick ")]),t.filterByList.includes(s)?i("div",{on:{click:function(e){return t.removeFilter(s)}}},[i("i",{staticClass:"ri-heart-2-line"}),t._v(" Unpick ")]):t._e(),i("hr"),i("div",{on:{click:function(e){return t.addDeleted(s)}}},[i("i",{staticClass:"ri-delete-bin-2-line"}),t._v(" Remove ")])])])}))],2)]),i("div",{class:{active:t.showMobileMenu},attrs:{id:"content"}},[i("h3",[t._v(" Result: "),i("span",{staticClass:"small"},[t._v(t._s(t.queriesData.length))])]),0!==t.queriesData.length||t.noResults?t._e():i("div",[i("div",{staticClass:"alert alert-info",attrs:{role:"alert"}},[t._v(" Generating, please wait. ")]),i("Loading")],1),t.noResults?i("div",[i("div",{staticClass:"alert alert-warning",attrs:{role:"alert"}},[t._v(" Your selection has no result. ")])]):t._e(),t._l(t.queriesData.slice(0,t.limit),(function(e,s){return i("div",{key:s,staticClass:"card content-card"},[i("div",{staticClass:"show-similar",class:{active:t.similarActive},on:{click:function(i){return t.sortSimilarObjects(e.cluster_id)}}},[t.similarActive?t._e():i("div",[i("i",{staticClass:"fas fa-greater-than-equal"}),t._v(" show similar records ")]),t.similarActive?i("div",[i("i",{staticClass:"fas fa-less-than-equal"}),t._v(" show all records ")]):t._e()]),i("div",{staticClass:"card-body"},[i("h5",{staticClass:"card-title card-title-similar"},[t._v(t._s(e.text))]),i("p",{staticClass:"small"},[t._v(t._s(e.content))]),i("div",t._l(e.data,(function(e,s){return i("span",{key:s,staticClass:"badge badge-pill badge-secondary mr-1 cursor-pointer",on:{click:function(i){return t.addFilter(e,!1)}}},[t._v(t._s(e)+" ")])})),0)])])})),t.limit<t.queriesData.length?i("button",{staticClass:"btn btn-light w-100",attrs:{type:"button"},on:{click:function(e){t.limit=t.limit+5}}},[t._v(" Show More ")]):t._e()],2)])]):t._e(),i("Footer",{attrs:{"api-key":t.apiKey,"model-uuid":t.modelUuid}})],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("h1",[i("b",{staticClass:"logo"},[t._v("KenSpace")]),i("span",{staticClass:"badge badge-secondary"},[t._v("Beta")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-md-6"},[i("div",{staticClass:"mt-4"},[i("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Search..."}})])])}],l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("svg",{staticClass:"wave",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320"}},[i("path",{attrs:{fill:"#0099ff",d:"M0 77 C 473,283 822,-40 1920,116 V 359 H 0 V 67 Z"}},[i("animate",{attrs:{attributeName:"d",attributeType:"XML",dur:"20s",repeatCount:"indefinite",values:"M0 77 C 473,283 822,-40 1920,116 V 359 H 0 V 67 Z;\n        M0 77 C 973,260 1722,-53 1920,120 V 359 H 0 V 67 Z;\n        M0 77 C 473,-40 1222,283 1920,136 V 359 H 0 V 67 Z;\n        M0 77 C 473,283 822,-40 1920,116 V 359 H 0 V 67 Z;"}})])]),i("footer",[i("div",{staticClass:"container"},[i("div",{staticClass:"container"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm"},[i("h1",[t._v("KenSpace")]),t.apiKey?i("div",[i("p",[i("b",[t._v("Your Token:")]),t._v(" "+t._s(t.apiKey))]),i("p",[i("b",[t._v("Model UUID:")]),t._v(" "+t._s(t.modelUuid))])]):t._e()]),t._m(0)])])])])])},c=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-sm"},[i("p",{staticClass:"author"},[t._v(" Pascal Andermatt"),i("br"),t._v(" Stefan Brunner ")])])}],u={name:"Footer",props:{apiKey:String,modelUuid:String}},d=u,f=(i("7583"),i("2877")),h=Object(f["a"])(d,l,c,!1,null,"2871ba14",null),p=h.exports,v=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},m=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sk-folding-cube"},[i("div",{staticClass:"sk-cube1 sk-cube"}),i("div",{staticClass:"sk-cube2 sk-cube"}),i("div",{staticClass:"sk-cube4 sk-cube"}),i("div",{staticClass:"sk-cube3 sk-cube"})])}],g={name:"Loading"},b=g,_=(i("a430"),Object(f["a"])(b,v,m,!1,null,"72a14539",null)),C=_.exports,y={name:"Home",components:{Loading:C,Footer:p},props:{msg:String},data:function(){return{apiKey:"",showMobileMenu:!1,originalQueriesData:[],filterByList:[],deletedList:[],queriesData:[],facetData:[],limit:5,noResults:!1,tagsSameAsResult:!1,modelUuid:"",sortABC:!1,similarActive:!1,currentClusterId:null}},methods:{login:async function(){const t=i("3d20"),{value:e}=await t.fire({title:"Enter your Beta Key",input:"text",inputPlaceholder:"Enter your Beta Key",inputAttributes:{autocapitalize:"off",autocorrect:"off"},showClass:{popup:"animated zoomIn faster"},hideClass:{popup:"animated zoomOut faster"}}),s=t.mixin({icon:"error",showConfirmButton:!1,timer:1500,timerProgressBar:!0,footer:"Please contact an administrator",hideClass:{popup:"animated zoomOut faster"}});if(e){const a=i("bc3a"),r=this;a({method:"GET",url:"http://127.0.0.1:5000/auth/",headers:{Authorization:`Bearer ${e}`}}).then((function(i){"successful"===i.data&&(r.apiKey=e,t.fire({icon:"success",title:"Signed in successfully",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:e=>{e.addEventListener("mouseenter",t.stopTimer),e.addEventListener("mouseleave",t.resumeTimer)}}),localStorage.apiKey=e,r.loadContent())})).catch((function(){s.fire({title:"Your key is not valid"})}))}else s.fire({title:"Your key is empty"})},logout:function(){this.apiKey="";const t=i("3d20");t.fire({icon:"success",title:"Log out successfully",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:e=>{e.addEventListener("mouseenter",t.stopTimer),e.addEventListener("mouseleave",t.resumeTimer)}})},resetApp:function(){localStorage.modelUuid="",this.filterByList=[],this.deletedList=[],this.facetData=[],this.queriesData=[],this.noResults=!1;const t=i("3d20");t.fire({icon:"success",title:"Generating new Cluster",position:"top-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,onOpen:e=>{e.addEventListener("mouseenter",t.stopTimer),e.addEventListener("mouseleave",t.resumeTimer)}}),this.loadContent()},loadContent:async function(){const t=i("bc3a"),e=i("3d20"),s=this;let a={};localStorage.modelUuid&&(a={uuid:localStorage.modelUuid}),0!==this.deletedList.length&&(a={...a,deletedWords:JSON.stringify(this.deletedList)}),t({method:"GET",url:"http://127.0.0.1:5000/queries/",params:a,headers:{Authorization:`Bearer ${localStorage.apiKey}`}}).then((function(t){s.originalQueriesData=t.data["results"],s.queriesData=t.data["results"],s.modelUuid=t.data["uuid"],localStorage.modelUuid=t.data["uuid"],s.removeFilter(""),e.close()}))},generateFacet:function(t){let e={};for(let a=0;a<t.length;a++){let i=t[a].data;for(let t=0;t<i.length;t++)i[t]in e?e[i[t]]=e[i[t]]+1:e[i[t]]=1}let i=Object.keys(e),s=this.queriesData.length;this.tagsSameAsResult=i.every(t=>e[t]===s),this.facetData=this.sortObject(e)},changeSort:function(){this.sortABC=!this.sortABC,this.facetData=this.sortObject(this.facetData)},sortObject:function(t){let e=Object.keys(t).map((function(e){return[e,t[e]]}));this.sortABC?e.sort((function(t,e){return t[0]<e[0]?-1:t[0]>e[0]?1:0})):e.sort((function(t,e){return e[1]-t[1]}));let s={};const a=i("1157");return a.each(e,(function(t,e){s[e[0]]=e[1]})),s},groupCluster:function(){this.similarActive&&(this.queriesData=this.queriesData.filter(t=>t["cluster_id"]==this.currentClusterId))},sortSimilarObjects:function(t){this.similarActive=!this.similarActive,this.currentClusterId=null,this.similarActive&&(this.currentClusterId=t),this.removeFilter("")},toggleFilter:function(t){this.filterByList.includes(t)?this.removeFilter(t):this.addFilter(t)},addFilter:function(t){this.filterByList.includes(t)||(this.limit=5,this.filterByList.push(t),this.queriesData=this.queriesData.filter(e=>e["data"].includes(t)),this.generateFacet(this.queriesData))},clearFiltered:function(){this.noResults=!1,this.filterByList=[],this.queriesData=[...this.originalQueriesData],this.groupCluster(),this.generateFacet(this.queriesData)},removeFilter:function(t){this.noResults=!1,this.filterByList=this.filterByList.filter(e=>e!==t),this.queriesData=[...this.originalQueriesData];for(let e=0;e<this.filterByList.length;e++)this.queriesData=this.queriesData.filter(t=>t["data"].includes(this.filterByList[e]));this.groupCluster(),0===this.queriesData.length&&(this.noResults=!0),this.generateFacet(this.queriesData)},addDeleted:function(t){if(this.deletedList.includes(t))return;this.similarActive=!1,this.deletedList.push(t),this.removeFilter(t);const e=i("3d20");e.fire({title:"Generating new Cluster",onBeforeOpen:()=>{e.showLoading(),this.queriesData=[],this.loadContent()},showConfirmButton:!1})},clearDeleted:function(){this.noResults=!1,this.deletedList=[],this.similarActive=!1;const t=i("3d20");t.fire({title:"Generating new Cluster",onBeforeOpen:()=>{t.showLoading(),this.loadContent()},showConfirmButton:!1})},removeDeleted:function(t){this.deletedList=this.deletedList.filter(e=>e!==t),this.similarActive=!1;const e=i("3d20");e.fire({title:"Generating new Cluster",onBeforeOpen:()=>{e.showLoading(),this.queriesData=[],this.loadContent()},showConfirmButton:!1})}},watch:{apiKey(t){localStorage.apiKey=t},filterByList(t){localStorage.filterByList=JSON.stringify(t)},deletedList(t){localStorage.deletedList=JSON.stringify(t)}},mounted(){localStorage.filterByList&&(this.filterByList=JSON.parse(localStorage.filterByList)),localStorage.deletedList&&(this.deletedList=JSON.parse(localStorage.deletedList)),localStorage.modelUuid&&(this.modelUuid=localStorage.modelUuid),localStorage.apiKey&&(this.apiKey=localStorage.apiKey,this.loadContent())}},w=y,k=(i("9060"),Object(f["a"])(w,n,o,!1,null,"3c038b9e",null)),L=k.exports,S={name:"App",components:{Home:L}},B=S,D=(i("5c0b"),Object(f["a"])(B,a,r,!1,null,null,null)),O=D.exports,A=i("9483");Object(A["a"])("/ba20-kenspace-frontend/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});i("4989"),i("ab8b");s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(O)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var s=i("9c0c"),a=i.n(s);a.a},7242:function(t,e,i){},7583:function(t,e,i){"use strict";var s=i("53cc"),a=i.n(s);a.a},9060:function(t,e,i){"use strict";var s=i("f17f"),a=i.n(s);a.a},"9c0c":function(t,e,i){},a430:function(t,e,i){"use strict";var s=i("7242"),a=i.n(s);a.a},f17f:function(t,e,i){}});
//# sourceMappingURL=app.f2a253ce.js.map