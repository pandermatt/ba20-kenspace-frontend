(function(t){function e(e){for(var i,r,l=e[0],o=e[1],c=e[2],d=0,h=[];d<l.length;d++)r=l[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&h.push(a[r][0]),a[r]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);u&&u(e);while(h.length)h.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],i=!0,l=1;l<s.length;l++){var o=s[l];0!==a[o]&&(i=!1)}i&&(n.splice(e--,1),t=r(r.s=s[0]))}return t}var i={},a={app:0},n=[];function r(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=i,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=o;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"1c4d":function(t,e,s){},"53cc":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var i=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("Home")],1)},n=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"header-container"},[s("div",{staticClass:"container"},[t._m(0),t.apiKey?s("div",[s("p",[s("b",[t._v("Hello!")]),t._v(" "),s("button",{staticClass:"link-style",on:{click:t.logout}},[t._v("logout")])]),s("button",{staticClass:"link-style",on:{click:t.clearFiltered}},[t._v(" clear picked ")]),t._v(" | "),s("button",{staticClass:"link-style",on:{click:t.clearDeleted}},[t._v(" clear deleted ")]),t._v(" | "),s("button",{staticClass:"link-style",on:{click:t.resetApp}},[t._v(" reset & generate new model ")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"display-filter"},[s("b",[t._v("picked")]),t._v(" "),0===t.filterByList.length?s("span",[t._v("none")]):t._e(),s("transition-group",{attrs:{name:"list"}},t._l(t.filterByList,(function(e,i){return s("span",{key:i+0,staticClass:"badge badge-dark mr-1 cursor-pointer",staticStyle:{"padding-right":"20px"},on:{click:function(s){return t.removeFilter(e)}}},[t._v(t._s(e)+" "),s("i",{staticClass:"ri-close-circle-line",staticStyle:{position:"absolute","padding-left":"5px"}})])})),0)],1),s("div",[s("b",[t._v("deleted")]),t._v(" "),0===t.deletedList.length?s("span",[t._v("none")]):t._e(),s("transition-group",{attrs:{name:"list"}},t._l(t.deletedList,(function(e,i){return s("span",{key:i+0,staticClass:"badge badge-dark mr-1 cursor-pointer",staticStyle:{"padding-right":"20px"},on:{click:function(s){return t.removeDeleted(e)}}},[t._v(t._s(e)+" "),s("i",{staticClass:"ri-close-circle-line",staticStyle:{position:"absolute","padding-left":"5px"}})])})),0)],1)]),0!==t.originalQueriesData.length?s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"mt-4 search-bar"},[s("div",{staticStyle:{position:"relative"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"search",attrs:{type:"text"},domProps:{value:t.searchText},on:{input:[function(e){e.target.composing||(t.searchText=e.target.value)},t.search]}}),s("span",{staticClass:"focus-border"})])]),s("button",{staticClass:"btn btn-primary btn-search",on:{click:t.search}},[t._v(" Search ")])]):t._e()])]):t._e()])]),t.apiKey?t._e():s("div",{staticClass:"container login-page"},[s("div",{staticClass:"jumbotron home-box"},[s("h1",{staticClass:"display-4"},[t._v("Sorry!")]),s("p",{staticClass:"lead"},[t._v(" This page is currently only accessible for registered beta users. ")]),s("hr",{staticClass:"my-4"}),s("button",{staticClass:"link-style",on:{click:t.login}},[t._v(" Click here if you have received a beta key ")])])]),t.apiKey&&t.upload?s("Upload",{on:{finished:t.loadContent}}):t._e(),t.apiKey&&!t.upload?s("div",{staticClass:"home-box"},[s("div",{staticClass:"hamburger cursor-pointer",class:{active:t.showMobileMenu},attrs:{id:"hamburger-circle"},on:{click:function(e){t.showMobileMenu=!t.showMobileMenu}}},[s("span",{staticClass:"line"}),s("span",{staticClass:"line"}),s("span",{staticClass:"line"})]),s("div",{staticClass:"wrapper"},[s("nav",{class:{active:t.showMobileMenu},attrs:{id:"sidebar"}},[s("h3",[t._v(" Facet "),s("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:t.changeSort}},[t._v(" Sort "),s("i",{staticClass:"fas",class:[t.sortABC?"fa-sort-numeric-down":"fa-sort-alpha-down"]})])]),s("div",{staticClass:"sidebar-card"},[0===Object.keys(t.facetData).length?s("div",[s("Loading")],1):t._e(),t._l(Object.keys(t.facetData).slice(0,t.facetLimit),(function(e,i){return s("div",{key:i,staticClass:"facet-badge"},[s("span",{staticClass:"badge cursor-pointer",class:[t.filterByList.includes(e)?"badge-info":"badge-dark"],on:{click:function(s){return t.toggleFilter(e)}}},[t._v(t._s(e)+" "),s("span",{staticClass:"badge",class:[t.tagsSameAsResult?"badge-danger":"badge-light"]},[t._v(t._s(t.facetData[e]))])]),s("div",{staticClass:"action-box"},[t.filterByList.includes(e)?t._e():s("div",{on:{click:function(s){return t.addFilter(e)}}},[s("i",{staticClass:"ri-heart-line"}),t._v(" Pick "),s("i",{staticClass:"far fa-object-group",staticStyle:{"margin-left":"6px"}}),t._v(" "+t._s(t.facetClusterNumber[e].length)+" ")]),t.filterByList.includes(e)?s("div",{on:{click:function(s){return t.removeFilter(e)}}},[s("i",{staticClass:"ri-heart-2-line"}),t._v(" Unpick ")]):t._e(),s("hr"),s("div",{on:{click:function(s){return t.addDeleted(e)}}},[s("i",{staticClass:"ri-delete-bin-2-line"}),t._v(" Remove ")])])])})),t.facetLimit<Object.keys(t.facetData).length?s("button",{staticClass:"btn btn-light w-100 mt-4",attrs:{type:"button"},on:{click:function(e){t.facetLimit=t.facetLimit+200}}},[t._v(" Show More ")]):t._e()],2)]),s("div",{class:{active:t.showMobileMenu},attrs:{id:"content"}},[s("h3",[t._v(" Result: "),s("span",{staticClass:"small"},[t._v(t._s(t.queriesData.length))]),s("ProgressBar",{attrs:{result:t.queriesData.length,"result-total":t.originalQueriesData.length}})],1),0!==t.queriesData.length||t.noResults?t._e():s("div",[s("div",{staticClass:"alert alert-info",attrs:{role:"alert"}},[t._v(" Generating, please wait. ")]),s("div",{staticClass:"alert alert-warning",attrs:{role:"alert"}},[t._v(" Please do not refresh this page. ")]),s("Loading")],1),t.noResults?s("div",[s("div",{staticClass:"alert alert-warning",attrs:{role:"alert"}},[t._v(" Your selection has no result. ")])]):t._e(),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},t._l(t.queriesData.slice(0,t.queryLimit),(function(e,i){return s("div",{key:i,staticClass:"card content-card"},[s("div",{staticClass:"show-similar",class:{active:t.similarActive},on:{click:function(s){return t.sortSimilarObjects(e.cluster_id)}}},[t.similarActive?t._e():s("div",[s("i",{staticClass:"fas fa-greater-than-equal"}),t._v(" show similar records ")]),t.similarActive?s("div",[s("i",{staticClass:"fas fa-less-than-equal"}),t._v(" show all records ")]):t._e()]),e.meta_info.image?s("div",{staticClass:"card-header"},[s("img",{attrs:{src:e.meta_info.image,alt:"Movie Cover"}})]):t._e(),s("div",{staticClass:"card-body",class:{"card-body-with-image":e.meta_info.image}},[s("h5",{staticClass:"card-title card-title-similar"},[t._v(t._s(e.text))]),s("p",{staticClass:"small"},[t._v(t._s(e.meta_info.content))]),s("div",t._l(e.data,(function(e,i){return s("span",{key:i,staticClass:"badge badge-pill badge-secondary mr-1 cursor-pointer",on:{click:function(s){return t.addFilter(e,!1)}}},[t._v(t._s(e)+" ")])})),0)]),t.queriesData.length!==t.originalQueriesData.length?s("div",{staticClass:"card-footer",class:{"card-footer-with-image":e.meta_info.image}},[s("FeedbackButtons",{attrs:{submitted:!1},on:{up:function(s){return t.shareFeedback("yes",e.text)},down:function(s){return t.shareFeedback("no",e.text)}}})],1):t._e()])})),0),t.queryLimit<t.queriesData.length?s("button",{staticClass:"btn btn-light w-100",attrs:{type:"button"},on:{click:function(e){t.queryLimit=t.queryLimit+5}}},[t._v(" Show More ")]):t._e()],1)])]):t._e(),s("Footer",{attrs:{"api-key":t.apiKey,"model-uuid":t.modelUuid}})],1)},l=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h1",[s("b",{staticClass:"logo"},[t._v("KenSpace")]),s("span",{staticClass:"badge badge-secondary"},[t._v("Beta")])])}],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("svg",{staticClass:"wave",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320"}},[s("path",{attrs:{fill:"#0099ff",d:"M0 77 C 473,283 822,-40 1920,116 V 359 H 0 V 67 Z"}},[s("animate",{attrs:{attributeName:"d",attributeType:"XML",dur:"20s",repeatCount:"indefinite",values:"M0 77 C 473,283 822,-40 1920,116 V 359 H 0 V 67 Z;\n        M0 77 C 973,260 1722,-53 1920,120 V 359 H 0 V 67 Z;\n        M0 77 C 473,-40 1222,283 1920,136 V 359 H 0 V 67 Z;\n        M0 77 C 473,283 822,-40 1920,116 V 359 H 0 V 67 Z;"}})])]),s("footer",[s("div",{staticClass:"container"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm"},[s("h1",[t._v("KenSpace")]),t.apiKey?s("div",[s("p",[s("b",[t._v("Your Token:")]),t._v(" "+t._s(t.apiKey))]),s("p",[s("b",[t._v("Model UUID:")]),t._v(" "+t._s(t.modelUuid))])]):t._e()]),t._m(0)])])])])])},c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-sm"},[s("p",{staticClass:"author"},[t._v(" Pascal Andermatt"),s("br"),t._v(" Stefan Brunner ")])])}],u={name:"Footer",props:{apiKey:String,modelUuid:String}},d=u,h=(s("7583"),s("2877")),p=Object(h["a"])(d,o,c,!1,null,"2871ba14",null),f=p.exports,m=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},v=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sk-folding-cube"},[s("div",{staticClass:"sk-cube1 sk-cube"}),s("div",{staticClass:"sk-cube2 sk-cube"}),s("div",{staticClass:"sk-cube4 sk-cube"}),s("div",{staticClass:"sk-cube3 sk-cube"})])}],g={name:"Loading"},b=g,y=(s("a430"),Object(h["a"])(b,m,v,!1,null,"72a14539",null)),_=y.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"progress"},[s("div",{staticClass:"bar",style:t.progressStyles},[s("p",{staticClass:"percent"},[t._v(t._s(t.result))])])])},k=[],w={name:"ProgressBar",props:{result:null,resultTotal:null},computed:{progressStyles(){return{width:`${this.result/this.resultTotal*100}%`}}}},S=w,L=(s("e190"),Object(h["a"])(S,C,k,!1,null,"43c94896",null)),D=L.exports,q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.submitted?t._e():s("div",[t._v(" Is this helpful? "),s("button",{staticClass:"link-style",on:{click:function(e){return t.share("up")}}},[s("i",{staticClass:"far fa-thumbs-up ml-3"}),t._v(" Yes ")]),s("button",{staticClass:"link-style",on:{click:function(e){return t.share("down")}}},[s("i",{staticClass:"far fa-thumbs-down ml-3"}),t._v(" No ")])]),t.submitted?s("div",[s("i",[t._v("Thanks for your feedback")])]):t._e()])},B=[],x={props:{submitted:Boolean},methods:{share(t){this.$emit(t),this.submitted=!0}}},O=x,F=(s("c121"),Object(h["a"])(O,q,B,!1,null,"75b20a3f",null)),A=F.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",staticStyle:{"margin-top":"-100px"}},[s("h1",[t._v("Analyze your own data")]),s("small",[t._v('Currently only CSV Files (with "," separated) are supported')]),s("div",{staticClass:"alert alert-warning mt-2 mb-2",attrs:{role:"alert"}},[t.showWarning?s("h1",[t._v("Warning!")]):t._e(),t._m(0),t.showWarning?s("button",{staticClass:"btn btn-danger mt-2 mb-2",on:{click:function(e){t.showWarning=!1}}},[t._v(" I understand ")]):t._e()]),t.showWarning?t._e():s("div",[s("vue-dropzone",{ref:"myVueDropzone",attrs:{id:"dropzone",options:t.dropzoneOptions},on:{"vdropzone-complete":t.afterComplete}}),s("button",{staticClass:"btn btn-danger mt-2 mb-2",on:{click:t.removeFile}},[t._v(" Remove All Files ")])],1),t.cols?s("div",[s("table",{staticClass:"table mt-2 mb-2"},[t._m(1),s("tbody",t._l(t.cols,(function(e,i){return s("tr",{key:i},[s("td",[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.pickedDisplay,expression:"pickedDisplay"}],staticClass:"mr-2",attrs:{type:"radio",name:"display"},domProps:{value:e,checked:t._q(t.pickedDisplay,e)},on:{change:function(s){t.pickedDisplay=e}}}),t._v(t._s(e)+" ")])]),s("td",[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.pickedContent,expression:"pickedContent"}],staticClass:"mr-2",attrs:{type:"radio",name:"content"},domProps:{value:e,checked:t._q(t.pickedContent,e)},on:{change:function(s){t.pickedContent=e}}}),t._v(t._s(e)+" ")])])])})),0)]),s("p",[s("b",[t._v("Display Text:")]),t._v(" "+t._s(t.pickedDisplay))]),s("p",[s("b",[t._v("Content:")]),t._v(" "+t._s(t.pickedContent))]),""!==t.pickedContent&&""!==t.pickedDisplay||!t.validated?t._e():s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" Select columns to analyse ")]),s("h3",{staticClass:"mt-4 mb-2"},[t._v("Data Language")]),t._l(["german","english"],(function(e,i){return s("div",{key:i},[s("p",[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.language,expression:"language"}],staticClass:"mr-2",attrs:{type:"radio",name:"language"},domProps:{value:e,checked:t._q(t.language,e)},on:{change:function(s){t.language=e}}}),t._v(t._s(e)+" ")])])])})),""===t.language&&t.validated?s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" Select language ")]):t._e(),s("h3",{staticClass:"mt-4 mb-2"},[t._v("Language Analysis Techniques")]),s("div",[s("p",[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.techniques,expression:"techniques"}],staticClass:"mr-2",attrs:{type:"radio",name:"techniques"},domProps:{value:t.nltk,checked:t._q(t.techniques,t.nltk)},on:{change:function(e){t.techniques=t.nltk}}}),t._v("NLTK "),s("span",{staticClass:"text-muted font-italic ml-2"},[t._v("Analyse Text based on Language Features, Faster")])])])]),s("div",[s("p",[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.techniques,expression:"techniques"}],staticClass:"mr-2",attrs:{type:"radio",name:"techniques"},domProps:{value:t.spacy,checked:t._q(t.techniques,t.spacy)},on:{change:function(e){t.techniques=t.spacy}}}),t._v("SpaCy "),s("span",{staticClass:"text-muted font-italic ml-2"},[t._v("Analyse Text based on Connections, Slower")])])])]),""===t.techniques&&t.validated?s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" Select Language Analysis Techniques ")]):t._e(),s("button",{staticClass:"btn btn-primary",on:{click:t.start}},[t._v("Start")])],2):t._e()])},j=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v(" Your data will be uploaded directly to the server. If you do not want to share your data or if you do not have the rights of the data, "),s("b",[t._v("DO NOT")]),t._v(" upload them. ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Display Text")]),s("th",{attrs:{scope:"col"}},[t._v("Content")])])])}],M=s("92c3"),P=s.n(M),N=(s("1e3f"),{name:"Upload",components:{vueDropzone:P.a},data:function(){return{dropzoneOptions:{url:"https://kenspace.cloudlab.zhaw.ch/upload/",acceptedFiles:"text/csv",maxFiles:1,maxFilesize:20,headers:{Authorization:`Bearer ${localStorage.apiKey}`}},cols:null,pickedDisplay:"",pickedContent:"",filename:"",language:"",techniques:"",showWarning:!0,validated:!1}},methods:{afterComplete(t){let e=JSON.parse(t.xhr.response);this.cols=e["cols"],this.filename=e["filename"]},start(){this.validated=!0,""!==this.pickedContent&&""!==this.pickedDisplay&&""!==this.language&&""!==this.techniques&&(localStorage.settings=JSON.stringify({display:this.pickedDisplay,content:this.pickedContent,filename:this.filename,language:this.language,techniques:this.techniques}),this.$emit("finished"))},removeFile(){this.cols=null,this.$refs.myVueDropzone.removeAllFiles()}}}),K=N,E=Object(h["a"])(K,T,j,!1,null,null,null),z=E.exports,$={name:"Home",components:{Upload:z,FeedbackButtons:A,ProgressBar:D,Loading:_,Footer:f},props:{msg:String},data:function(){return{apiKey:"",showMobileMenu:!1,originalQueriesData:[],filterByList:[],deletedList:[],queriesData:[],facetData:{},facetClusterNumber:{},maxFacetClusterNumber:null,queryLimit:10,facetLimit:200,searchText:"",noResults:!1,tagsSameAsResult:!1,modelUuid:"",sortABC:!1,similarActive:!1,currentClusterId:null,upload:!1,removeFilterFunc:null}},computed:{badgeHeatMap(t){return{width:`${t}%`}}},methods:{login:async function(){const t=s("3d20"),{value:e}=await t.fire({title:"Enter your Beta Key",input:"text",inputPlaceholder:"Enter your Beta Key",inputAttributes:{autocapitalize:"off",autocorrect:"off"},showClass:{popup:"animated zoomIn faster"},hideClass:{popup:"animated zoomOut faster"}}),i=t.mixin({icon:"error",showConfirmButton:!1,timer:1500,timerProgressBar:!0,footer:"Please contact an administrator",hideClass:{popup:"animated zoomOut faster"}});if(e){const a=s("bc3a"),n=this;a({method:"GET",url:"https://kenspace.cloudlab.zhaw.ch/auth/",headers:{Authorization:`Bearer ${e}`}}).then((function(s){"successful"===s.data&&(n.apiKey=e,t.fire({icon:"success",title:"Signed in successfully",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:e=>{e.addEventListener("mouseenter",t.stopTimer),e.addEventListener("mouseleave",t.resumeTimer)}}),localStorage.apiKey=e,"custom"===e.split(":")[1]?n.upload=!0:n.loadContent())})).catch((function(){i.fire({title:"Your key is not valid"})}))}else i.fire({title:"Your key is empty"})},logout:function(){this.apiKey="",localStorage.modelUuid="",this.filterByList=[],this.deletedList=[],this.facetData={},this.queriesData=[],this.noResults=!1,this.facetLimit=200,this.queryLimit=10,this.searchText="",localStorage.settings="",this.similarActive=!1;const t=s("3d20");t.fire({icon:"success",title:"Log out successfully",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:e=>{e.addEventListener("mouseenter",t.stopTimer),e.addEventListener("mouseleave",t.resumeTimer)}})},resetApp:function(){localStorage.modelUuid="",this.filterByList=[],this.deletedList=[],this.facetData={},this.queriesData=[],this.noResults=!1,this.facetLimit=200,this.queryLimit=10,this.searchText="",this.similarActive=!1;const t=s("3d20");t.fire({icon:"success",title:"Generating new Cluster",position:"top-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,onOpen:e=>{e.addEventListener("mouseenter",t.stopTimer),e.addEventListener("mouseleave",t.resumeTimer)}}),this.loadContent()},loadContent:async function(){const t=s("bc3a"),e=s("3d20");this.upload=!1;const i=this;let a={};localStorage.modelUuid&&(a={uuid:localStorage.modelUuid}),0!==this.deletedList.length&&(a={...a,deletedWords:JSON.stringify(this.deletedList)}),localStorage.settings&&(a={...a,settings:localStorage.settings}),t({method:"GET",url:"https://kenspace.cloudlab.zhaw.ch/queries/",params:a,headers:{Authorization:`Bearer ${localStorage.apiKey}`}}).then((function(t){i.originalQueriesData=t.data["results"],i.queriesData=t.data["results"],i.modelUuid=t.data["uuid"],localStorage.modelUuid=t.data["uuid"],i.removeFilter(""),e.close()})).catch(()=>{e.fire({title:"Oops... Something went wrong!",text:"Please reset the app",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Reset App",icon:"error"}).then(t=>{t.value&&i.logout()})})},generateFacet:function(t){let e={},s={};for(let n=0;n<t.length;n++){let i=t[n].data,a=t[n].cluster_id;for(let t=0;t<i.length;t++)i[t]in e?(e[i[t]]++,s[i[t]].includes(a)||s[i[t]].push(a)):(e[i[t]]=1,s[i[t]]=[a])}this.facetClusterNumber=s;let i=Object.keys(e),a=this.queriesData.length;this.tagsSameAsResult=i.every(t=>e[t]===a),this.facetData=this.sortObject(e)},changeSort:function(){this.sortABC=!this.sortABC,this.facetData=this.sortObject(this.facetData)},sortObject:function(t){let e=Object.keys(t).map((function(e){return[e,t[e]]}));this.sortABC?e.sort((function(t,e){return t[0]<e[0]?-1:t[0]>e[0]?1:0})):e.sort((function(t,e){return e[1]-t[1]}));let i={};const a=s("1157");return a.each(e,(function(t,e){i[e[0]]=e[1]})),i},groupCluster:function(){this.similarActive&&(this.queriesData=this.queriesData.filter(t=>t["cluster_id"]==this.currentClusterId))},sortSimilarObjects:function(t){this.similarActive=!this.similarActive,this.currentClusterId=null,this.similarActive&&(this.currentClusterId=t),this.removeFilter("")},toggleFilter:function(t){this.filterByList.includes(t)?this.removeFilter(t):this.addFilter(t)},addFilter:function(t){this.filterByList.includes(t)||(this.queryLimit=5,this.filterByList.push(t),this.queriesData=this.queriesData.filter(e=>e["data"].includes(t)),this.generateFacet(this.queriesData))},clearFiltered:function(){this.noResults=!1,this.filterByList=[],this.queriesData=[...this.originalQueriesData],this.groupCluster(),this.filterBySearch(),this.generateFacet(this.queriesData)},filterBySearch:function(){if(""!==this.searchText){const t=s("ffe7");let e={shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["text","meta_info.content"]},i=new t(this.queriesData,e);this.queriesData=i.search(this.searchText)}},removeFilter:function(t){this.noResults=!1,this.filterByList=this.filterByList.filter(e=>e!==t),this.queriesData=[...this.originalQueriesData];for(let e=0;e<this.filterByList.length;e++)this.queriesData=this.queriesData.filter(t=>t["data"].includes(this.filterByList[e]));this.groupCluster(),this.filterBySearch(),0===this.queriesData.length&&(this.noResults=!0),this.generateFacet(this.queriesData)},addDeleted:function(t){if(this.deletedList.includes(t))return;this.deletedList.push(t),this.removeFilter(t);const e=s("3d20");e.fire({title:"Generating new Cluster",onBeforeOpen:()=>{e.showLoading(),this.queriesData=[],this.loadContent()},showConfirmButton:!1})},clearDeleted:function(){this.noResults=!1,this.deletedList=[];const t=s("3d20");t.fire({title:"Generating new Cluster",onBeforeOpen:()=>{t.showLoading(),this.loadContent()},showConfirmButton:!1})},removeDeleted:function(t){this.deletedList=this.deletedList.filter(e=>e!==t);const e=s("3d20");e.fire({title:"Generating new Cluster",onBeforeOpen:()=>{e.showLoading(),this.queriesData=[],this.loadContent()},showConfirmButton:!1})},search:function(){if(""===this.searchText)return this.queriesData=[...this.originalQueriesData],void this.removeFilter("");this.removeFilterFunc("")},shareFeedback:function(t,e){let i={uuid:localStorage.modelUuid,isHelpful:t,movieTitle:e,similarClusterActive:this.similarActive,search:this.searchText,facet:JSON.stringify(this.filterByList),delete:JSON.stringify(this.deletedList),resultCount:this.queriesData.length};const a=s("bc3a");a({method:"POST",url:"https://kenspace.cloudlab.zhaw.ch/feedback/",params:i,headers:{Authorization:`Bearer ${localStorage.apiKey}`}})}},watch:{apiKey(t){localStorage.apiKey=t},filterByList(t){localStorage.filterByList=JSON.stringify(t)},deletedList(t){localStorage.deletedList=JSON.stringify(t)}},mounted(){const t=s("2ef0");this.removeFilterFunc=t.debounce(this.removeFilter,400),localStorage.filterByList&&(this.filterByList=JSON.parse(localStorage.filterByList)),localStorage.deletedList&&(this.deletedList=JSON.parse(localStorage.deletedList)),localStorage.modelUuid&&(this.modelUuid=localStorage.modelUuid),localStorage.apiKey&&(this.apiKey=localStorage.apiKey,this.loadContent())}},U=$,R=(s("a618"),Object(h["a"])(U,r,l,!1,null,"2cfb9894",null)),V=R.exports,H={name:"App",components:{Home:V}},J=H,I=(s("5c0b"),Object(h["a"])(J,a,n,!1,null,null,null)),Q=I.exports,G=s("9483");Object(G["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});s("4989"),s("ab8b");i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(Q)}}).$mount("#app"),window.onbeforeunload=function(){return"Data will be lost if you leave the page, are you sure?"}},"5c0b":function(t,e,s){"use strict";var i=s("9c0c"),a=s.n(i);a.a},"6bdb":function(t,e,s){},7242:function(t,e,s){},7583:function(t,e,s){"use strict";var i=s("53cc"),a=s.n(i);a.a},"9c0c":function(t,e,s){},a430:function(t,e,s){"use strict";var i=s("7242"),a=s.n(i);a.a},a618:function(t,e,s){"use strict";var i=s("c9b5"),a=s.n(i);a.a},c121:function(t,e,s){"use strict";var i=s("6bdb"),a=s.n(i);a.a},c9b5:function(t,e,s){},e190:function(t,e,s){"use strict";var i=s("1c4d"),a=s.n(i);a.a}});
//# sourceMappingURL=app.331af638.js.map